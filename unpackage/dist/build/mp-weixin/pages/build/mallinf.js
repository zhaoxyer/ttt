(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/build/mallinf"],{"11ef":function(t,i,e){"use strict";e.r(i);var a=e("db3a"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);i["default"]=n.a},"1fcc":function(t,i,e){"use strict";e("33f4");var a=s(e("b0ce")),n=s(e("7a53"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},"251b":function(t,i,e){"use strict";var a=e("f9d3"),n=e.n(a);n.a},"7a53":function(t,i,e){"use strict";e.r(i);var a=e("f358"),n=e("11ef");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("251b");var c=e("2877"),o=Object(c["a"])(n["default"],a["a"],a["b"],!1,null,"00045b6b",null);o.options.__file="mallinf.vue",i["default"]=o.exports},db3a:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=c(e("701a")),n=c(e("609d")),s=c(e("231e"));function c(t){return t&&t.__esModule?t:{default:t}}function o(t){return u(t)||r(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}var d={data:function(){return{static:"",type:0,malllist:[],guigetype:[],num:0,mallinf:{},mallprice:0,barlist:[],pop:!1,clientGoods:{},detailinf:"",comlist:[],pop1:!1,swipeList:[]}},components:{wxParse:s.default},onLoad:function(t){this.static=a.default.static,a.default.settitle(t.title||"商品详情"),this.req_detail(t._id),this.req_comment(t._id)},methods:{cgpop:function(){this.cg_pop1()},cg_pop1:function(){this.comlist.length?this.pop1=!this.pop1:a.default.totast("暂无评价")},onShareAppMessage:function(){return{title:"",success:function(t){console.log("转发成功",t)},fail:function(t){console.log("转发失败",t)}}},cg_type:function(t){this.type=t,this.mallinf=this.guigetype[t],this.mallinf.picture?this.swipeList=this.mallinf.picture.split(","):this.swipeList=[this.clientGoods.picture]},cg_pop:function(){(this.pop||this.num)&&(this.pop=!this.pop)},go_build_pay:function(){if(wx.getStorageSync("token")){var t=o(this.guigetype);if(t=t.filter(function(t){return console.log(t.num),t.num>0}),console.log(JSON.stringify(t)),t.length)t=t;else{var i=Object.assign({},this.mallinf);t.push(i),t[0].num=1}wx.setStorageSync("buildinf",t),wx.navigateTo({url:"../build/pay?name=".concat(this.clientGoods.name)})}else wx.navigateTo({url:"../mine/login"})},minus:function(t){console.log(t),0!=this.num&&0!=this.guigetype[t].num&&(this.num-=1,this.guigetype[t].num-=1,this.mallprice=(Number(this.mallprice)-Number(this.guigetype[t].price)).toFixed(2),0==this.num&&(this.pop=!1))},add:function(t){console.log(t),this.guigetype[t].num+=1,this.num+=1,this.mallprice=(Number(this.mallprice)+Number(this.guigetype[t].price)).toFixed(2)},cleanbar:function(){this.num=0,this.mallinf.num=0,this.mallprice=0,this.barlist[0]=[],this.pop=!1},req_detail:function(t){var i=this;a.default.request({data:{goodsid:t},url:"goods/goodsdetail"}).then(function(t){if(t.clientGoods){i.clientGoods=t.clientGoods||{};var e=new RegExp("/attach/download\\?filePath=","g");i.detailinf=(0,n.default)(i.clientGoods.detail.replace(e,a.default.static)),t.clientGoodsSpecList[0]&&(t.clientGoodsSpecList.forEach(function(t){t.num=0}),i.mallinf=t.clientGoodsSpecList[0],i.mallinf.picture?i.swipeList=i.mallinf.picture.split(","):i.swipeList=[i.clientGoods.picture]),i.guigetype=t.clientGoodsSpecList}else a.default.totast("商品信息不全")})},filterdate:function(t){for(var i=[],e=0;e<t.length;e++)i[e]={goodsId:t[e].goodsId,num:t[e].num,specId:t[e].id};return i},req_cartadd:function(){var t=this;if(wx.getStorageSync("token")){var i=o(this.guigetype);if(i=i.filter(function(t){return console.log(t.num),t.num>0}),i.length){var e=this.filterdate(i);a.default.request({data:e,url:"cart/add",c:!0}).then(function(i){t.cleanbar(),a.default.totast("加入购物车成功")})}else a.default.totast("请先选择商品")}else wx.navigateTo({url:"../mine/login"})},req_comment:function(t){var i=this;a.default.request({data:{proId:t,type:2},url:"comment/list"}).then(function(t){i.comlist=t})}}};i.default=d},f358:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("swiper",{attrs:{"indicator-dots":t.indicatorDots,autoplay:t.autoplay,interval:t.interval,duration:t.duration}},t._l(t.swipeList,function(i,a){return i?e("swiper-item",{key:i,attrs:{mpcomid:"63085cac-0-"+a}},[e("image",{attrs:{src:t.static+i}})]):t._e()})),e("div",{staticClass:"mallinf2"},[e("div",{staticClass:"mallinf2price"},[e("span",[t._v("￥"+t._s(t.mallinf.price))]),t.iii?e("image",{attrs:{src:"../../static/close.png"}}):t._e()]),e("div",[t._v(t._s(t.clientGoods.name))]),e("div",{staticClass:"mallinf2s"},[e("span",[t._v("月销："+t._s(t.mallinf.sellStock)+"笔")]),e("span",{attrs:{eventid:"63085cac-0"},on:{click:t.cg_pop1}},[t._v("评价﹀")]),e("span",[t._v("质保期:"+t._s(t.clientGoods.qualityGuaPeriod)+"天")])])]),e("div",{staticClass:"bggray"}),e("div",{staticClass:"guige"},[e("h1",[t._v("规格")]),e("div",{staticClass:"guigetype"},t._l(t.guigetype,function(i,a){return e("span",{key:a,class:{active:t.type==a},attrs:{eventid:"63085cac-1-"+a},on:{click:function(i){t.cg_type(a)}}},[t._v(t._s(i.name))])})),e("div",{staticClass:"add"},[e("div",{staticClass:"addedit"},[e("image",{attrs:{src:"../../static/build/minus.png",eventid:"63085cac-2"},on:{click:function(i){i.stopPropagation(),t.minus(t.type)}}}),e("span",[t._v(t._s(t.mallinf.num))]),e("image",{attrs:{src:"../../static/build/add.png",eventid:"63085cac-3"},on:{click:function(i){i.stopPropagation(),t.add(t.type)}}})]),e("span",[t._v("数量")])])],1),e("div",{staticClass:"bggray"}),t.detailinf?e("div",{staticClass:"detail"},[e("wxParse",{attrs:{content:t.detailinf,mpcomid:"63085cac-1"}})],1):t._e(),e("div",{staticStyle:{height:"110rpx"}}),e("div",{staticClass:"footer"},[e("div",{staticClass:"edit"},[e("span",{attrs:{eventid:"63085cac-4"},on:{click:t.req_cartadd}},[t._v("加入购物车")]),e("span",{attrs:{eventid:"63085cac-5"},on:{click:t.go_build_pay}},[t._v("购买")])]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.num,expression:"num"}],staticClass:"num"},[t._v(t._s(t.num))]),e("image",{staticClass:"logo",attrs:{src:"../../static/logo.jpg",eventid:"63085cac-6"},on:{click:t.cg_pop}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.num,expression:"num"}],staticClass:"money"},[t._v("￥"+t._s(t.mallprice))])]),t.pop?e("div",{staticClass:"pop",attrs:{eventid:"63085cac-11"},on:{click:t.cg_pop}},[e("div",{staticClass:"popcont"},[e("div",{staticClass:"delbar"},[e("image",{attrs:{src:"../../static/mine/del.png",eventid:"63085cac-7"},on:{click:function(i){i.stopPropagation(),t.cleanbar(i)}}}),e("span",{attrs:{eventid:"63085cac-8"},on:{click:function(i){i.stopPropagation(),t.cleanbar(i)}}},[t._v("清空购物车")])]),e("div",{staticClass:"barlist"},t._l(t.guigetype,function(i,a){return i.num?e("div",{key:a,staticClass:"add"},[e("div",{staticClass:"addedit"},[e("image",{attrs:{src:"../../static/build/minus.png",eventid:"63085cac-9-"+a},on:{click:function(i){i.stopPropagation(),t.minus(a)}}}),e("span",[t._v(t._s(i.num))]),e("image",{attrs:{src:"../../static/build/add.png",eventid:"63085cac-10-"+a},on:{click:function(i){i.stopPropagation(),t.add(a)}}})]),e("span",{staticClass:"barname"},[t._v(t._s(i.name))]),e("span",{staticClass:"barmoney"},[t._v("￥"+t._s(i.price))])]):t._e()}))])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.pop1,expression:"pop1"}],staticClass:"pop"},[e("comment",{attrs:{list:t.comlist,eventid:"63085cac-12",mpcomid:"63085cac-2"},on:{cgpop:t.cgpop}})],1)],1)},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})},f9d3:function(t,i,e){}},[["1fcc","common/runtime","common/vendor"]]]);